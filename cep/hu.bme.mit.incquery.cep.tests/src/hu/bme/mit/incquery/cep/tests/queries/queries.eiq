package hu.bme.mit.incquery.cep.tests.testcasesmqueries

import "cep.meta"
import "sm.meta"
import "http://www.eclipse.org/emf/2002/Ecore"
uses hu.bme.mit.incquery.cep.runtime.evaluation.*

pattern finishedStateMachine(sm) {
	StateMachine.currentState.label(sm, stateLabel);
	check(stateLabel.equalsIgnoreCase("final"));
}

pattern latestEvent(e) {
	InternalExecutionModel.latestEvent(_, e);
}

pattern transition(t) {
	Transition(t);
}

pattern enabledTransition(t) {
	find latestEvent(e);
	find transition(t);
	Event.id(e, eventId);
	Transition.guard.eventType(t, eventGuardType);
	check((eventGuardType.canonicalName as String).equalsIgnoreCase(eventId));
}

pattern CEvent(event : Event) {
	Event.id(event, eventId);
	check(eventId.equalsIgnoreCase("hu.bme.mit.incquery.cep.tests.testcaseSm.events.C"));
}